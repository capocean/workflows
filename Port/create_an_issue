{
  "identifier": "create_an_issue",
  "title": "Create an issue",
  "icon": "Jira",
  "description": "Create a new issue in a Jira project",
  "trigger": {
    "type": "self-service",
    "operation": "CREATE",
    "userInputs": {
      "properties": {
        "issue_type": {
          "icon": "DefaultProperty",
          "title": "Issue type",
          "type": "string",
          "enum": [
            "Bug",
            "Story",
            "Task",
            "Epic"
          ],
          "enumColors": {
            "Bug": "red",
            "Story": "green",
            "Epic": "purple"
          }
        },
        "title": {
          "icon": "DefaultProperty",
          "type": "string",
          "title": "Title"
        },
        "description": {
          "title": "Description",
          "icon": "DefaultProperty",
          "type": "string",
          "format": "markdown"
        },
        "assignee": {
          "title": "Assignee",
          "icon": "DefaultProperty",
          "type": "string",
          "blueprint": "_user",
          "format": "entity",
          "dataset": {
            "combinator": "and",
            "rules": [
              {
                "property": "jira_user_id",
                "operator": "isNotEmpty"
              }
            ]
          }
        },
        "project": {
          "title": "Project",
          "icon": "DefaultProperty",
          "type": "string",
          "blueprint": "jiraProject",
          "format": "entity"
        }
      },
      "required": [
        "project",
        "issue_type",
        "title"
      ],
      "order": [
        "project",
        "issue_type",
        "title",
        "description",
        "assignee"
      ]
    }
  },
  "invocationMethod": {
    "type": "WEBHOOK",
    "url": "https://api.atlassian.com/ex/jira/86d27dea-1c3e-4be9-8929-73a57aef29df/rest/api/2/issue",
    "agent": false,
    "synchronized": true,
    "method": "POST",
    "headers": {
      "Content-Type": "application/json",
      "Authorization": "Bearer {{ .secrets.__JIRA_JIRA_ATLASSIAN_USER_TOKEN }}"
    },
    "body": {
      "fields": {
        "project": {
          "key": "{{.inputs.project.identifier}}"
        },
        "assignee": {
          "id": "{{.inputs.assignee.relations.jira_user}}"
        },
        "summary": "{{.inputs.title}}",
        "description": "{{.inputs.description}}",
        "issuetype": {
          "name": "{{.inputs.issue_type}}"
        }
      }
    }
  },
  "requiredApproval": false,
  "approvalNotification": {
    "type": "email"
  }
}